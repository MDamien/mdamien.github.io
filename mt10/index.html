<html><head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>MT10</title>
  
  <script type="text/javascript" src="http://code.jquery.com/jquery-git2.js"></script>
  <link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css">
  <style type="text/css">
  </style>

<script type="text/javascript">//<![CDATA[ 

function smoofitude(x){
    return Math.max.apply(Math,primeFactorList(x));
}
function supersmoofitude(x){
    var arr = toFactorPowerList(primeFactorList(x))
    var max = 0;
    for(var i = 0;i < arr.length;i++){
        max = Math.max(max,Math.pow(arr[i][0],arr[i][1]));
    }
    return max;
}

function simple_smooth_calcul() {
    var x = parseInt($("#smooth .x").val());
    var s = x + "=" + primeFactorList(x).join("*")+"<br/>";
    $("#smooth .result").html(s+x+" est "+smoofitude(x)+"-smooth et "+supersmoofitude(x)+"-supersmooth");
}
function smoothtable(maxx){
	var res = {}
    for(var i = 2;i <= maxx;i++){
        var r = smoofitude(i);
        if( res[r] == undefined){
			res[r] = [i];
		}else{
			res[r].push(i);
		}
    }
    return res;
}
function supersmoothtable(maxx){
	var res = {}
    for(var i = 2;i <= maxx;i++){
        var r = supersmoofitude(i);
        if( res[r] == undefined){
			res[r] = [i];
		}else{
			res[r].push(i);
		}
    }
    return res;
}

function generate_smooth_table() {
    var maxx = parseInt($("#smooth-table .x").val());
    var maxB = parseInt($("#smooth-table .B").val());
    var sm = smoothtable(maxx);
    var ssm = supersmoothtable(maxx);
    $("#smooth-table tbody").html("");
    for(var i = 2;i <= maxB;i++){
		var r = i == 2 ? "": "Id";
		if (sm[i] != undefined){
			r += i == 2 ? "": " + ";
			r += sm[i];
		}
		var r2 = i == 2 ? "": "Id";
		if (ssm[i] != undefined){
			r2 += i == 2 ? "": " + ";
			r2 += ssm[i];
		}
        $("#smooth-table tbody").append($("<tr><th>"+i+"</th><th>"+r+"</th><th>"+r2+"</th></tr>"));
    }
}

function primeFactorList(n) {
	if (n < 1)
		throw "Argument error";
	
	var result = [];
	while (n != 1) {
		var factor = smallestFactor(n);
		result.push(factor);
		n /= factor;
	}
	return result;
}

function smallestFactor(n) {
	if (n < 2)
		throw "Argument error";
	
	if (n % 2 == 0)
		return 2;
	var end = Math.floor(Math.sqrt(n));
	for (var i = 3; i <= end; i += 2) {
		if (n % i == 0)
			return i;
	}
	return n;
}

function toFactorPowerList(factors) {
	var result = [];
	var factor = factors[0];
	var count = 1;
	for (var i = 1; i < factors.length; i++) {
		if (factors[i] == factor) {
			count++;
		} else {
			result.push([factor, count]);
			factor = factors[i];
			count = 1;
		}
	}
	result.push([factor, count]);
	return result;
}
//]]>  

</script>


<style type="text/css"></style></head>
<body class="claro" style="">
  <div class="container-fluid">
    <div class="row-fluid">
        <div class="span12">
            	<h2>MT10</h2>
            	<div id="smooth">
					<h4>Smooth & SuperSmooth</h4>
					<input class="x" type="text" placeholder="x" value="12"><br>
					<button type="button" class="btn" onclick="simple_smooth_calcul()">Calculer</button>
					<b><div class="result">
					</div></b>
				</div>
            	<div id="smooth-table">
					<h4>Tableau des B-Smooth</h4>
					<input class="x" type="text" placeholder="x max" value="70"><br>
					<input class="B" type="text" placeholder="B max" value="10"><br>
					<button type="button" class="btn" onclick="generate_smooth_table()">Calculer</button>
					<table class="table">
						<thead>
							<tr>
								<th>B</th>
								<th>B-Smooth</th>
								<th>B-Supersmooth</th>
							</tr>
						</thead>
						<tbody>
						</tbody>
					</table>
					</div></b>
				</div>
        </div>
    </div>
</div>
  





</body></html>
